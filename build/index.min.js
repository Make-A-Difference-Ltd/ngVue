!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular"),require("vue")):"function"==typeof define&&define.amd?define("ngVue",["exports","angular","vue"],e):e(n.ngVue=n.ngVue||{},n.angular,n.Vue)}(this,function(n,s,O){"use strict";var j="default"in s?s.default:s;O="default"in O?O.default:O;var a=/^(attrs|props|on|nativeOn|class|style|hook)$/,A=function(n){return n.reduce(function(n,e){var r,t,i,o,u;for(i in e)if(r=n[i],t=e[i],r&&a.test(i))if("class"===i&&("string"==typeof r&&(u=r,n[i]=r={},r[u]=!0),"string"==typeof t&&(u=t,e[i]=t={},t[u]=!0)),"on"===i||"nativeOn"===i||"hook"===i)for(o in t)r[o]=c(r[o],t[o]);else if(Array.isArray(r))n[i]=r.concat(t);else if(Array.isArray(t))n[i]=[r].concat(t);else for(o in t)r[o]=t[o];else n[i]=e[i];return n},{})};function c(n,e){return function(){n&&n.apply(this,arguments),e&&e.apply(this,arguments)}}function V(n,o){var u={props:"vProps",data:"vData",on:"vOn"}[n],e=new RegExp(u,"i"),r=o[u];if(j.isDefined(r))return r;var t=Object.keys(o).filter(function(n){return e.test(n)});if(0===t.length)return null;var a={};return t.forEach(function(n){var e,r,t,i=(e=u,t=n.slice(e.length),(r=t).charAt(0).toLowerCase()+r.slice(1));a[i]=o[n]}),a}var w=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},i=function(n){if(Array.isArray(n)){for(var e=0,r=Array(n.length);e<n.length;e++)r[e]=n[e];return r}return Array.from(n)};function l(r,t){return function(n){var e=n;t&&(e=s.isArray(n)?[].concat(i(n)):s.isObject(n)?w({},n):n),r(e)}}function E(n,e,r,t){var i=n.props?n.props:n.data;if(i){var o,u,a=r.depth,c=r.quirk,f=(o=i,u=e,function(e){s.isString(o)?e(o,O.set.bind(O,u,"_v")):Object.keys(o).forEach(function(n){e(o[n],O.set.bind(O,u._v,n))})});switch(a){case"value":f(function(n,e){t.$watch(n,l(e,c),!0)});break;case"collection":f(function(n,e){t.$watchCollection(n,l(e,c))});break;case"reference":default:f(function(n,e){t.$watch(n,l(e,c))})}}}var x={Object:function(n){return[n]},Array:function(n){return n},String:function(n){return n.split(/\s*,\s*/g).filter(Boolean).map(function(n){return{name:n}})}};function o(n,r,e,t,i){var o,u,a,c=this,f=arguments,s=i.has("$ngVue")?i.get("$ngVue"):null,l=i.get("$compile"),v={data:V("data",o=e),props:V("props",o),events:V("on",o)},p=(u=n,a=i,j.isFunction(u)?u:a.get(u)),d=function(n,e){var r=n.vDirectives;if(j.isUndefined(r))return null;var t,i=e.$eval(r),o=x[(t=i,t.constructor.name)];return o?o(i):null}(e,t)||[],y={_v:function(n,e){var r=n[n.props?"props":"data"];if(!r)return null;if(j.isString(r))return e.$eval(r);var t={};return Object.keys(r).forEach(function(n){t[n]=e.$eval(r[n])}),t}(v,t)||{}},h=function(n,r){var t=n.events;if(!t||!j.isObject(t))return null;var i={};return Object.keys(t).forEach(function(n){i[n]=r.$eval(t[n]);var e=i[n];j.isFunction(e)&&(i[n]=function(){var n=arguments;return r.$evalAsync(function(){return e.apply(null,n)})})}),i}(v,t)||{},g=!!s&&s.inQuirkMode(),$=s?s.getVueHooks():{},m=$.mounted;$.mounted=function(){if(r[0].innerHTML.trim()){var n=l(r[0].innerHTML)(t),e=this.$refs.__slot__;e.parentNode.replaceChild(n[0],e)}j.isFunction(m)&&m.apply(this,arguments)},e.renderSlot&&setTimeout(function(){if(r[0].innerHTML.trim()){var n=l(r[0].innerHTML)(t),e=c.$refs.__slot__;e.parentNode.replaceChild(n[0],e)}j.isFunction(m)&&m.apply(c,f)},500);var _=s?{store:s.getVuexStore()}:{},b={depth:e.watchDepth,quirk:g};E(v,y,b,t);var k=new O(w({name:"NgVue",el:r[0],data:y,render:function(n){return n(p,A([{directives:d},{props:y._v,on:h}]),[n("span",{ref:"__slot__"})])}},$,_));t.$on("$destroy",function(){k.$destroy(),k.$el.remove()})}var e=j.module("ngVue",[]).directive("vueComponent",["$injector",function(t){return{restrict:"E",link:function(n,e,r){o(r.name,e,r,n,t)}}}]).factory("createVueComponent",["$injector",function(i){return function(t,n){var e={restrict:"E",link:function(n,e,r){o(t,e,r,n,i)}};return j.extend(e,n)}}]);n.ngVue=e,Object.defineProperty(n,"__esModule",{value:!0})});
